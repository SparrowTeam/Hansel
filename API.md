## Общая информация

При логине или регистрации мы создаём для пользователя токен, который однозначно его идентифицирует.
При каждом запросе приложение должно добавлять в запрос хидер *X-API-TOKEN*.
Если токен не валиден, то на запрос приходит ответ 409.

Идентификаторы всех меток заранее известны. Если приложение обращается для работы с меткой, которая не известа, приложение отвечает ошибкой 410.

## POST /user/login

Авторизация пользователя.

### Тело запроса
```
{
    "email": <строка>,
    "password": <строка>,
}
```

### Тело ответа
```
{
   "token": <строка, гуид>
}
```

### Ошибки
 * 404 -- пользватель с таким email/password не существует
 * 403 -- для указанного email не совпадает пароль.

## POST /user/register

Регистрация пользователя.

### Тело запроса
```
{
    "email": <строка>,
    "password": <строка>,
    "name": <строка>
}
```

### Тело ответа
```
{
   "token": <строка, гуид>
}
```

### Ошибки
 * 404 -- пользватель с таким email/password не существует
 * 403 -- для указанного email не совпадает пароль.

## GET /user/info

Получить инфо пользователя

### Тело ответа
```
{
    "info": [
        {
            "name": <строка>,
            "team": {
               "id": <строка, идентификатор командый, uuid>,
               "name": <строка, название командж>,
               "color": "строка, хекс-ргб строка"
             }
        }
    ]
}
```

## GET /user/marks/:user_id

Метки пользователя

## Параметры запросы

   * usert_id -- если передан, то возвращаем метки пользователя по ID, если нет,
                 то возвращаем метки текущего пользователя

### Тело ответа
```
{
   "marks": [
        {
            "id": <идентификатор метки>,
            "name": <название места, если присутсвует>,
            "updated_datetime": <дата последнего обновления метки>
            "value": <int, ценность метки>,
            "team_id":
            "coordinates":
                {
                    "longtitude": <float, долгота>,
                    "latitude": <float, широта>,
                    "code": <str, строка, которая однозначно идентифицирует точку>
                }
        }
   ]
}
```

## GET /marks/:mark_id

Получить информацию о метке.

### Тело ответа

```
  {
      "info": {
            "id": <идентификатор метки>,
            "related_datetime": {
                "registered": <дата первого появления метки>,
                "updated": <дата последнего захвата метки>
            },
            "name": <название места, если присутсвует>,
            "team": {
                "id": <>,
                "color": <>
            }
            "coordinates":
                {
                    "longtitude": <float, долгота>,
                    "latitude": <float, широта>,
                    "code": <str, строка, которая однозначно идентифицирует точку>
                }
            "value": <int, ценность метки>,
            "users": [
                {
                    "id": <строка>,
                    "name": <имя>,
                    "team_color": <цвет>
                }
            ],
            "photos": [
                <список строк, url c фотографиями метки>,
            ],
            "comments": [
                {
                    "user_name": <имя пользователя>,
                    "team_color": <цвет команды>,
                    "datetime": <время, когда комментарий был добавлен (дата захвата метки)>,
                    "text": <строка, 255 символов>
                }
            ]
       }
  }
```

### Ошибки
 * 404 -- метка ещё не добавлялась
 * 403 -- если метка твоей команды

## GET /mark/:mark_id/status

Получить информацию о статусе метки

### Коды ответа

   * 200 -- если метка уже известна
   * 202 -- если метка новая
   * 403 -- если метка уже захвачена его командой

## POST /mark/:mark_id

Загрузить новую метку

### Тело запроса
```
  {
      "info": {
            "name": <str, название места, может отсуствовать, если не
                     получено от API карты>,
            "coordinates":
                {
                    "longtitude": <float, долгота>,
                    "latitude": <float, широта>,
                    "code": <str, строка, которая однозначно идентифицирует точку>
                }
            "photos": [
                <идентификаторы фотографий>,
            ],
            "comment": <строка, комментарий, 255 символов>
       }
  }
```

## POST /mark/:mark_id/photo

Загрузить фотографию территории с меткой.

<**coming soon**>

### Тело ответа
```
{
   "image_id": <строка, гуид>
}
```

## GET /team/:team_id

Получить информацию о команде.

### Тело ответа
```
{
   "name": <строка, название команды>,
   "color": <строка, хекс-ргб>,
}
```
